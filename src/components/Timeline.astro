---
import { Image } from 'astro:assets';

import IBMLogo from "../assets/logos/ibm.svg";
import RavenLogo from "../assets/logos/raven.svg";
import MindBridgeLogo from "../assets/logos/mindbridge.png";
import GadgetLogo from "../assets/logos/gadget.png";
import TrunkLogo from "../assets/logos/trunk.png";

const jobs = [
  {
    title: "Staff Software Developer",
    company: "IBM",
    startDate: "2014/07",
    logo: IBMLogo,
    url: "https://www.ibm.com"
  },
  {
    title: "Sr. Software Developer",
    company: "Raven Telemetry",
    startDate: "2017/07",
    logo: RavenLogo,
    url: "https://www.raventelemetry.com"
  },
  {
    title: "Sr. Full Stack Developer",
    company: "MindBridge",
    startDate: "2019/04",
    logo: MindBridgeLogo,
    url: "https://www.mindbridge.ai"
  },
  {
    title: "Developer Advocate",
    company: "Gadget",
    startDate: "2022/05",
    logo: GadgetLogo,
    url: "https://gadget.dev"
  },
  {
    title: "Sr. DevRel Engineer",
    company: "Trunk",
    startDate: "2025/01",
    logo: TrunkLogo,
    url: "https://trunk.io"
  },
];
---

<div class="max-w-4xl mx-auto pt-8 md:pt-16">
  <!-- Desktop: Horizontal Timeline -->
  <div class="hidden md:block relative">
    <!-- Horizontal line -->
    <div class="absolute top-[2.5rem] left-0 right-0 h-0.5 bg-gray-500"></div>

    <div class="grid grid-cols-5 gap-8">
      {jobs.map((job, index) => (
        <div class="relative flex flex-col items-center">
          <!-- Date on timeline -->
          <span class="text-xs text-gray-400 mb-4">{job.startDate}</span>
          
          <!-- Timeline dot with conditional styling -->
          <div class={`w-4 h-4 rounded-full border-2 z-10 ${
            index === jobs.length - 1 
              ? "bg-blue-500 border-blue-300" 
              : "bg-white border-gray-500"
          }`}></div>

          <!-- Job card -->
          <a href={job.url} target="_blank" rel="noopener noreferrer" 
             class="mt-4 block p-4 text-center hover:bg-gray-800 hover:border-white/20 border border-transparent rounded-lg transition-all duration-200">
            <Image
              src={job.logo}
              alt={`${job.company} logo`}
              class="w-12 h-12 rounded-lg mx-auto p-2 mb-3 bg-white"
              loading="eager"
            />
            <h3 class="text-sm font-semibold text-white mb-1">{job.title}</h3>
            <p class="text-xs text-blue-300 mb-2 hover:text-blue-200">{job.company}</p>
          </a>
        </div>
      ))}
    </div>
  </div>

  <!-- Mobile: Vertical Timeline -->
  <div class="md:hidden relative">
    <!-- Vertical line -->
    <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-gray-500"></div>

    <div class="space-y-4">
      {jobs.reverse().map((job, index) => (
        <div class="relative flex items-center">
          <!-- Timeline dot with conditional styling -->
          <div class={`absolute left-2 w-4 h-4 rounded-full border-2 ${
            index === 0  // First item in reversed list is the latest
              ? "bg-blue-500 border-blue-300" 
              : "bg-white border-gray-500"
          }`}></div>

          <!-- Job card -->
          <a href={job.url} target="_blank" rel="noopener noreferrer" 
             class="ml-12 p-3 flex-1 block hover:bg-gray-800 hover:border-white/20 border border-transparent rounded-lg transition-all duration-200">
            <div class="flex items-center">
              <Image
                src={job.logo}
                alt={`${job.company} logo`}
                class="w-8 h-8 rounded-lg mr-3 bg-white p-1"
              />
              <div class="flex-1">
                <h3 class="text-sm font-semibold text-white">{job.title}</h3>
                <p class="text-xs text-blue-300 hover:text-blue-200">{job.company}</p>
              </div>
              <span class="text-xs text-gray-300">{job.period}</span>
            </div>
          </a>
        </div>
      ))}
    </div>
  </div>
</div>
